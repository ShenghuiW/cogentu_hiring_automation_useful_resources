Controller

@PostMapping(value ="manager/item")
    public Object addItem(@RequestParam("file") MultipartFile[] file, @RequestParam("name") String name, @RequestParam("category") String category,
                          @RequestParam("description") String description,
                          @RequestParam("subCategory") String subCategory,
                          @RequestParam("itemDetail") String itemDetail,
                          @RequestParam("price")double price) throws IOException {
        ItemDetail[] itemDetails = JSONObject.parseObject(itemDetail,ItemDetail[].class);
        String s= "";
        for(ItemDetail itemDetail1: itemDetails)
            s =  s+ " " + itemDetail1.toString();
        Item item = new Item(name, category, description, price, subCategory);
        logger.info(item.toString() + s);
        return itemService.addItem(file,item, Arrays.asList(itemDetails));
    }

Service
  
public Object addItem(MultipartFile[] files, Item item, List<ItemDetail> itemDetail) throws IOException {
        if (files.length == 0) {
            return 0;
        }
        List<ImageURL> listOfUrl = new ArrayList<>();
        /* transform photos to the ImageURL object then put into the list for item obj*/
        for (MultipartFile file : files) {
            UUID uuid = UUID.randomUUID();
            String filename = uuid.toString() + ".jpg";
            File toFile = new File("/home/ec2-user/webapp/image", filename);
            file.transferTo(toFile);
            String path = toFile.getPath();
            path = path.substring(21);
            ImageURL imageURL = new ImageURL(path,item);
            listOfUrl.add(imageURL);
        }
        for(ItemDetail itemDetail1: itemDetail)
            itemDetail1.setItem(item);
        item.setImageURL(listOfUrl);
        item.setItemDetails(itemDetail);
        JSONObject jsonObject = new JSONObject();
        jsonObject.put("data", null);
        jsonObject.put("status", itemDao.addItem(item));
        jsonObject.put("error", null);
        return jsonObject;
    }
